{% extends "reg6/reg.html" %}
{% load i18n %}
{% load reg6_filters %}
{% block content %}
<div id="content-main">

{% if ticket and total %}
    {% if promo %}
    <p>
    You are using promo code <b>{{ promo|escape }}</b>.
    </p>
    {% endif %}

    <p>
    Your {{ ticket.description|escape }} costs {{ ticket.price|money }}.
    </p>

    {% if items %}
    <p>
    You added the following additional items:
    </p>

    <ul>
    {% for item in items %}
        <li>{{ item.description|escape }} ({{ item.price|money|escape }})</li>
    {% endfor %}
    </ul>
    {% endif %}

    <p>
    Your total is {{ total|money|escape }}.
    </p>

    <p>
    We now need the following information from you. The fields in <b>bold</b>
    are required.
    </p>

    <form method="post" action=".">
    <input type="hidden" name="promo" value="{{ promo|escape }}" />
    <input type="hidden" name="ticket" value="{{ ticket.name|escape }}" />
    {% for item in items %}
        <input type="hidden" name="item{{ forloop.counter0 }}" value="{{ item.name|escape }}" />
    {% endfor %}

    {% if form.has_errors %}
    <h2>Please correct the following error{{ form.error_dict|pluralize }}:</h2>
    {% endif %}

    <table>
    <tr>
        <td><label for="id_salutation">Salutation:</label></td>
        <td>{{ form.salutation }}<br />
        {% if form.salutation.errors %}<b>{{ form.salutation.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_first_name"><b>First Name:</b></label></td>
        <td>{{ form.first_name }}<br />
        {% if form.first_name.errors %}<b>{{ form.first_name.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_last_name"><b>Last Name:</b></label></td>
        <td>{{ form.last_name }}<br />
        {% if form.last_name.errors %}<b>{{ form.last_name.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_title">Title:</label></td>
        <td>{{ form.title }}<br />
        {% if form.title.errors %}<b>{{ form.title.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_org">Organization:</label></td>
        <td>{{ form.org }}<br />
        {% if form.org.errors %}<b>{{ form.org.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_phone">Phone:</label></td>
        <td>{{ form.phone }}<br />
        {% if form.phone.errors %}<b>{{ form.phone.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_zip"><b>Zip:</b></label></td>
        <td>{{ form.zip }}<br />
        {% if form.zip.errors %}<b>{{ form.zip.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td><label for="id_email"><b>Email:</b></label></td>
        <td>{{ form.email }}<br />
        {% if form.email.errors %}<b>{{ form.email.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    <tr>
        <td colspan="2"><label for="id_can_email">Add me to the SCALE mailing list:</label> &nbsp;&nbsp;&nbsp;&nbsp;
        {{ form.can_email }}<br />
        {% if form.can_email.errors %}<b>{{ form.can_email.errors|join:", " }}</b>{% endif %}
        </td>
    </tr>
    </table>

    <p>
    <input type="submit" value="Continue" />
    </p>
    </form>

    <form method="post" action="../">
    <p>
    <input type="hidden" name="promo" value="{{ promo|escape }}" />
    <input type="submit" value="Start Over" />
    </p>
    </form>
{% else %}
Registration is closed.
{% endif %}
</div>
{% endblock %}

